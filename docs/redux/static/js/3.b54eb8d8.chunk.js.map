{"version":3,"sources":["reducers/news/index.js","reducers/news/items.js","components/news/ItemComponent.js","components/news/ItemsComponent.js","containers/NewsContainer.js","pages/NewsPage.js","../node_modules/timeago.js/lib/constant.js","../node_modules/timeago.js/lib/helper.js","../node_modules/timeago.js/lib/locales.js","../node_modules/timeago.js/lib/timer.js","api/HackerNewsApi.js","components/common/Header.js","../node_modules/timeago.js/lib/index.js","models/Item.js","../node_modules/timeago.js/lib/TimeAgo.js","actionTypes/ItemsActionType.js","actions/ItemsAction.js"],"names":["rootReducer","combineReducers","items","state","arguments","length","undefined","Immutable","List","action","type","itemsActionType","SYNC","withMutations","newState","map","itemAttributes","push","Item","ItemComponent","react_default","a","createElement","className","href","this","props","item","getUrl","title","score","dist","to","URL","name","userId","by","getTimeAgo","itemId","id","descendants","React","Component","ItemsComponent","itemComponents","ItemComponent_ItemComponent","key","page","params","NewsContainer","Header","ItemsComponent_ItemsComponent","connect","NewsPage","_this","NotFoundPage","store","createStore","newsRootReducer","actions","bindActionCreators","itemsAction","dispatch","sync","es","containers_NewsContainer","NProgress","start","attributes","isNaN","parseFloat","isFinite","HackerNewsApi","getTopStoryItems","done","Object","defineProperty","exports","value","IndexMapEn","split","IndexMapZH","ATTR_DATA_TID","SEC_ARRAY","ATTR_TIMEAGO","ATTR_DATETIME","setTidAttr","getDateAttr","getAttr","nextInterval","diffSec","formatDiff","toDate","toInt","_constant","__webpack_require__","_locales","f","parseInt","input","Date","test","trim","replace","diff","locale","defaultLocale","Locales","i","agoin","total_sec","Math","abs","date","nowDate","rst","d","ceil","node","getAttribute","attr","val","setAttribute","register","en","number","index","unit","zh_CN","func","run","cancel","Timers","_helper","clear","tid","clearTimeout","delay","setTimeout","hackerNewsApi","_Users_Takashi_GitHub_async_react_router_examples_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","displayNumber","Firebase","apps","initializeApp","databaseURL","api","database","ref","cache","LRU","max","maxAge","getTopStoryItemIds","ids","offset","limit","Promise","all","slice","_ref","_Users_Takashi_GitHub_async_react_router_examples_redux_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_Takashi_GitHub_async_react_router_examples_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","prev","next","findItem","abrupt","sent","stop","_x","apply","has","get","child","once","snapshot","set","concat","_ref2","_callee5","_context5","_this2","_x4","comments","_ref3","_callee6","comment","_context6","getComments","kids","_x5","react__WEBPACK_IMPORTED_MODULE_5___default","async_react_router__WEBPACK_IMPORTED_MODULE_6__","_TimeAgo","_timer","factory","TimeAgo","default","module","url","timeago","format","time","Record","_createClass","defineProperties","target","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","prototype","instance","TypeError","_classCallCheck","innerHTML","doRender","min","nodes","len","__webpack_exports__","Symbol","_actionTypes_ItemsActionType__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/3.b54eb8d8.chunk.js","sourcesContent":["import { combineReducers } from \"redux\";\nimport items from \"./items\";\n\nconst rootReducer = combineReducers({\n  items\n});\n\nexport default rootReducer;\n","import Immutable from \"immutable\";\nimport Item from \"../../models/Item\";\nimport { itemsActionType } from \"../../actionTypes/ItemsActionType\";\n\nexport default function items(state = Immutable.List(), action) {\n  switch (action.type) {\n    case itemsActionType.SYNC:\n      const newState = Immutable.List();\n      return newState.withMutations((newState) => {\n        action.items.map((itemAttributes) =>\n          newState.push(new Item(itemAttributes))\n        );\n      });\n    default:\n      return state;\n  }\n}\n","import React from \"react\";\nimport { URL, Link } from \"async-react-router\";\n\nexport default class ItemComponent extends React.Component {\n  render() {\n    return (\n      <div className=\"news-item\">\n        <h3 className=\"title\">\n          <a href={this.props.item.getUrl()}>{this.props.item.title}</a>\n        </h3>\n        <div>\n          <ul className=\"list-inline\">\n            <li className=\"score\">{this.props.item.score} points</li>\n            <li className=\"by\">\n              by{\" \"}\n              <Link to={URL.name(\"UserPage\", { userId: this.props.item.by })}>\n                {this.props.item.by}\n              </Link>\n            </li>\n            <li className=\"time\">{this.props.item.getTimeAgo()}</li>\n            <li className=\"comments-link\">\n              <Link to={URL.name(\"ItemPage\", { itemId: this.props.item.id })}>\n                {this.props.item.descendants} comments\n              </Link>\n            </li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ItemComponent from \"./ItemComponent\";\nimport { URL, Link } from \"async-react-router\";\n\nexport default class ItemsComponent extends React.Component {\n  render() {\n    const itemComponents = this.props.items.map((item) => (\n      <ItemComponent key={item.id} item={item} />\n    ));\n    return (\n      <div className=\"container\">\n        {itemComponents}\n        <h3>\n          <Link\n            to={URL.name(\"NewsPage\", { page: +this.props.params.page + 1 })}\n          >\n            more\n          </Link>\n        </h3>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport Header from \"../components/common/Header\";\nimport ItemsComponent from \"../components/news/ItemsComponent\";\n\nclass NewsContainer extends React.Component {\n  render() {\n    return (\n      <div>\n        <Header />\n        <ItemsComponent items={this.props.items} params={this.props.params} />\n      </div>\n    );\n  }\n}\n\nexport default connect((state) => ({\n  items: state.items\n}))(NewsContainer);\n","import NProgress from \"nprogress\";\nimport React from \"react\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport newsRootReducer from \"../reducers/news\";\nimport NewsContainer from \"../containers/NewsContainer\";\nimport HackerNewsApi from \"../api/HackerNewsApi\";\nimport NotFoundPage from \"./NotFoundPage\";\nimport { bindActionCreators } from \"redux\";\nimport { itemsAction } from \"../actions/ItemsAction\";\n\nexport default class NewsPage extends React.Component {\n  static initialPropsWillGet() {\n    NProgress.start();\n  }\n\n  static async getInitialProps(attributes) {\n    if (\n      isNaN(parseFloat(attributes.params.page)) ||\n      !isFinite(attributes.params.page)\n    ) {\n      return {\n        items: []\n      };\n    }\n\n    const page = attributes.params.page || 1;\n    return {\n      items: await HackerNewsApi.getTopStoryItems(page)\n    };\n  }\n\n  static initialPropsDidGet() {\n    NProgress.done();\n  }\n\n  render() {\n    if (!this.props.items.length) return <NotFoundPage />;\n\n    const ProviderWrapper = () => {\n      const store = createStore(newsRootReducer);\n\n      const actions = {\n        items: bindActionCreators(itemsAction, store.dispatch)\n      };\n      actions.items.sync(this.props.items);\n\n      return (\n        <Provider store={store}>\n          <NewsContainer params={this.props.params} actions={actions} />\n        </Provider>\n      );\n    };\n\n    return <ProviderWrapper />;\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\nvar IndexMapEn = exports.IndexMapEn = 'second_minute_hour_day_week_month_year'.split('_');\nvar IndexMapZH = exports.IndexMapZH = '秒_分钟_小时_天_周_月_年'.split('_');\nvar ATTR_DATA_TID = exports.ATTR_DATA_TID = 'data-tid';\nvar SEC_ARRAY = exports.SEC_ARRAY = [60, 60, 24, 7, 365 / 7 / 12, 12];\nvar ATTR_TIMEAGO = exports.ATTR_TIMEAGO = 'data-timeago';\nvar ATTR_DATETIME = exports.ATTR_DATETIME = 'datetime';","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setTidAttr = exports.getDateAttr = exports.getAttr = exports.nextInterval = exports.diffSec = exports.formatDiff = exports.toDate = exports.toInt = undefined;\n\nvar _constant = require('./constant');\n\nvar _locales = require('./locales');\n/**\n * change f into int, remove decimal. Just for code compression\n * @param f\n * @returns {number}\n */\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar toInt = exports.toInt = function toInt(f) {\n  return parseInt(f);\n};\n/**\n * format Date / string / timestamp to Date instance.\n * @param input\n * @returns {*}\n */\n\n\nvar toDate = exports.toDate = function toDate(input) {\n  if (input instanceof Date) return input;\n  if (!isNaN(input) || /^\\d+$/.test(input)) return new Date(toInt(input));\n  input = (input || '').trim().replace(/\\.\\d+/, '') // remove milliseconds\n  .replace(/-/, '/').replace(/-/, '/').replace(/(\\d)T(\\d)/, '$1 $2').replace(/Z/, ' UTC') // 2017-2-5T3:57:52Z -> 2017-2-5 3:57:52UTC\n  .replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, ' $1$2'); // -04:00 -> -0400\n\n  return new Date(input);\n};\n/**\n * format the diff second to *** time ago, with setting locale\n * @param diff\n * @param locale\n * @param defaultLocale\n * @returns {string | void | *}\n */\n\n\nvar formatDiff = exports.formatDiff = function formatDiff(diff, locale, defaultLocale) {\n  // if locale is not exist, use defaultLocale.\n  // if defaultLocale is not exist, use build-in `en`.\n  // be sure of no error when locale is not exist.\n  locale = _locales.Locales[locale] ? locale : _locales.Locales[defaultLocale] ? defaultLocale : 'en';\n  var i = 0,\n      agoin = diff < 0 ? 1 : 0,\n      // timein or timeago\n  total_sec = diff = Math.abs(diff);\n\n  for (; diff >= _constant.SEC_ARRAY[i] && i < _constant.SEC_ARRAY.length; i++) {\n    diff /= _constant.SEC_ARRAY[i];\n  }\n\n  diff = toInt(diff);\n  i *= 2;\n  if (diff > (i === 0 ? 9 : 1)) i += 1;\n  return _locales.Locales[locale](diff, i, total_sec)[agoin].replace('%s', diff);\n};\n/**\n * calculate the diff second between date to be formatted an now date.\n * @param date\n * @param nowDate\n * @returns {number}\n */\n\n\nvar diffSec = exports.diffSec = function diffSec(date, nowDate) {\n  nowDate = nowDate ? toDate(nowDate) : new Date();\n  return (nowDate - toDate(date)) / 1000;\n};\n/**\n * nextInterval: calculate the next interval time.\n * - diff: the diff sec between now and date to be formatted.\n *\n * What's the meaning?\n * diff = 61 then return 59\n * diff = 3601 (an hour + 1 second), then return 3599\n * make the interval with high performance.\n **/\n\n\nvar nextInterval = exports.nextInterval = function nextInterval(diff) {\n  var rst = 1,\n      i = 0,\n      d = Math.abs(diff);\n\n  for (; diff >= _constant.SEC_ARRAY[i] && i < _constant.SEC_ARRAY.length; i++) {\n    diff /= _constant.SEC_ARRAY[i];\n    rst *= _constant.SEC_ARRAY[i];\n  }\n\n  d = d % rst;\n  d = d ? rst - d : rst;\n  return Math.ceil(d);\n};\n/**\n * get the node attribute, native DOM and jquery supported.\n * @param node\n * @param name\n * @returns {*}\n */\n\n\nvar getAttr = exports.getAttr = function getAttr(node, name) {\n  if (node.getAttribute) return node.getAttribute(name); // native dom\n\n  if (node.attr) return node.attr(name); // jquery dom\n};\n/**\n * get the datetime attribute, `data-timeagp` / `datetime` are supported.\n * @param node\n * @returns {*}\n */\n\n\nvar getDateAttr = exports.getDateAttr = function getDateAttr(node) {\n  return getAttr(node, _constant.ATTR_TIMEAGO) || getAttr(node, _constant.ATTR_DATETIME);\n};\n/**\n * set the node attribute, native DOM and jquery supported.\n * @param node\n * @param val\n * @returns {*}\n */\n\n\nvar setTidAttr = exports.setTidAttr = function setTidAttr(node, val) {\n  if (node.setAttribute) return node.setAttribute(_constant.ATTR_DATA_TID, val);\n  if (node.attr) return node.attr(_constant.ATTR_DATA_TID, val);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.register = exports.Locales = undefined;\n\nvar _constant = require('./constant');\n\nvar zh_CN = function zh_CN(number, index) {\n  if (index === 0) return ['刚刚', '片刻后'];\n\n  var unit = _constant.IndexMapZH[parseInt(index / 2)];\n\n  return [number + ' ' + unit + \"\\u524D\", number + ' ' + unit + \"\\u540E\"];\n};\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar en = function en(number, index) {\n  if (index === 0) return ['just now', 'right now'];\n\n  var unit = _constant.IndexMapEn[parseInt(index / 2)];\n\n  if (number > 1) unit += 's';\n  return [number + ' ' + unit + ' ago', 'in ' + number + ' ' + unit];\n};\n/**\n * 所有的语言\n * @type {{en: function(*, *), zh_CN: function(*, *)}}\n */\n\n\nvar Locales = exports.Locales = {\n  en: en,\n  zh_CN: zh_CN\n};\n/**\n * 注册语言\n * @param locale\n * @param func\n */\n\nvar register = exports.register = function register(locale, func) {\n  Locales[locale] = func;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.run = exports.cancel = exports.Timers = undefined;\n\nvar _helper = require('./helper');\n\nvar _constant = require('./constant'); // 所有的定时器\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar Timers = exports.Timers = [];\n\nvar clear = function clear(tid) {\n  if (tid) {\n    clearTimeout(tid);\n    delete Timers[tid];\n  }\n};\n/**\n * 取消定时器\n * @param node\n */\n\n\nvar cancel = exports.cancel = function cancel(node) {\n  if (node) clear((0, _helper.getAttr)(node, _constant.ATTR_DATA_TID)); // get the timer of DOM node(native / jq).\n  else for (var tid in Timers) {\n      clear(tid);\n    }\n};\n/**\n * 开启一个 timer\n * @param func\n * @param delay\n */\n\n\nvar run = exports.run = function run(func, delay) {\n  var tid = setTimeout(function () {\n    // 从 Timer 中删除\n    clear(tid); // 执行目标方法\n\n    func();\n  }, delay); // there is no need to save node in object. Just save the key\n\n  Timers[tid] = 0;\n  return tid;\n};","import Firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport LRU from \"lru-cache\";\n\nclass HackerNewsApi {\n  constructor() {\n    this.displayNumber = 20;\n\n    if (!Firebase.apps.length) {\n      Firebase.initializeApp({\n        databaseURL: \"https://hacker-news.firebaseio.com\"\n      });\n    }\n    this.api = Firebase.database().ref(\"/v0\");\n    this.cache = LRU({\n      max: 500,\n      maxAge: 1000 * 60 * 60\n    });\n  }\n\n  async getTopStoryItems(page = 1) {\n    const ids = await this.getTopStoryItemIds();\n    const offset = this.displayNumber * (page - 1);\n    const limit = offset + this.displayNumber;\n    return await Promise.all(\n      ids.slice(offset, limit).map(async (id) => await this.findItem(id))\n    );\n  }\n\n  async getTopStoryItemIds() {\n    if (this.cache.has(\"topstories\")) return this.cache.get(\"topstories\");\n    const snapshot = await this.api.child(\"/topstories\").once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(\"topstories\", value);\n    return value;\n  }\n\n  async findItem(id) {\n    if (this.cache.has(`item/${id}`)) return this.cache.get(`item/${id}`);\n    const snapshot = await this.api.child(`/item/${id}`).once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(`item/${id}`, value);\n    return value;\n  }\n\n  async getComments(ids) {\n    if (!ids) {\n      return [];\n    }\n\n    const comments = await Promise.all(\n      ids.map(async (id) => await this.findItem(id))\n    );\n    return await Promise.all(\n      comments.map(async (comment) => {\n        comment.comments = await this.getComments(comment.kids);\n        return comment;\n      })\n    );\n  }\n\n  async findUser(id) {\n    if (this.cache.has(`/user/${id}`)) return this.cache.get(`/user/${id}`);\n    const snapshot = await this.api.child(`/user/${id}`).once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(`/user/${id}`, value);\n    return value;\n  }\n}\n\nconst hackerNewsApi = new HackerNewsApi();\n\nexport default hackerNewsApi;\n","import React from \"react\";\nimport { URL, Link } from \"async-react-router\";\n\nexport default class Header extends React.Component {\n  render() {\n    return (\n      <header className=\"navbar navbar-default\">\n        <nav className=\"container\">\n          <div className=\"d-flex justify-content-between hidden-lg-up\">\n            <Link to={URL.name(\"IndexPage\")} className=\"navbar-brand\">\n              Redux Example - Hacker News\n            </Link>\n          </div>\n        </nav>\n      </header>\n    );\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _TimeAgo = require('./TimeAgo');\n\nvar _locales = require('./locales');\n\nvar _timer = require('./timer'); // 入口函数\n\n\nvar factory = function factory(nowDate, locale) {\n  return new _TimeAgo.TimeAgo(nowDate, locale);\n};\n/**\n * 注册语言\n */\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nfactory.register = _locales.register;\n/**\n * 终止定时器\n */\n\nfactory.cancel = _timer.cancel;\nexports.default = factory;\nmodule.exports = exports['default'];","import Immutable from \"immutable\";\nimport { URL } from \"async-react-router\";\nimport timeago from \"timeago.js\";\n\nconst ItemRecord = Immutable.Record({\n  by: \"\",\n  descendants: 0,\n  id: null,\n  score: 0,\n  time: null,\n  title: \"\",\n  type: \"\",\n  url: \"\",\n  kids: null\n});\n\nexport default class Item extends ItemRecord {\n  getUrl() {\n    if (this.url) {\n      return this.url;\n    }\n\n    return URL.name(\"ItemPage\", { itemId: this.id });\n  }\n\n  getTimeAgo() {\n    return timeago().format(new Date(this.time * 1000));\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TimeAgo = undefined;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar _helper = require('./helper');\n\nvar _timer = require('./timer');\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar TimeAgo = exports.TimeAgo = function () {\n  function TimeAgo(nowDate, defaultLocale) {\n    _classCallCheck(this, TimeAgo);\n\n    this.nowDate = nowDate;\n    this.defaultLocale = defaultLocale || 'en';\n  }\n\n  _createClass(TimeAgo, [{\n    key: 'setLocale',\n    value: function setLocale(locale) {\n      this.defaultLocale = locale;\n    }\n    /**\n     * render 定期器渲染\n     * @param node\n     * @param date\n     * @param locale\n     */\n\n  }, {\n    key: 'doRender',\n    value: function doRender(node, date, locale) {\n      var _this = this;\n\n      var diff = (0, _helper.diffSec)(date, this.nowDate); // render\n\n      node.innerHTML = (0, _helper.formatDiff)(diff, locale, this.defaultLocale); // waiting %s seconds, do the next render\n\n      var tid = (0, _timer.run)(function () {\n        _this.doRender(node, date, locale);\n      }, Math.min((0, _helper.nextInterval)(diff) * 1000, 0x7FFFFFFF)); // set attribute date-tid\n\n      (0, _helper.setTidAttr)(node, tid);\n    }\n    /**\n     * render: render the DOM real-time.\n     * - nodes: which nodes will be rendered.\n     * - locale: the locale name used to format date.\n     *\n     * How to use it?\n     * var timeago = require('timeago.js')();\n     * // 1. javascript selector\n     * timeago.render(document.querySelectorAll('.need_to_be_rendered'));\n     * // 2. use jQuery selector\n     * timeago.render($('.need_to_be_rendered'), 'pl');\n     *\n     * Notice: please be sure the dom has attribute `datetime`.\n     */\n\n  }, {\n    key: 'render',\n    value: function render(nodes, locale) {\n      // by .length\n      if (nodes.length === undefined) nodes = [nodes];\n      var node = void 0;\n\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        node = nodes[i]; // clear node's timer\n\n        (0, _timer.cancel)(node);\n        this.doRender(node, (0, _helper.getDateAttr)(node), locale); // render item\n      }\n    }\n    /**\n     * format: format the date to *** time ago, with setting or default locale\n     * - date: the date / string / timestamp to be formatted\n     * - locale: the formatted string's locale name, e.g. en / zh_CN\n     *\n     * How to use it?\n     * var timeago = require('timeago.js')();\n     * timeago.format(new Date(), 'pl'); // Date instance\n     * timeago.format('2016-09-10', 'fr'); // formated date string\n     * timeago.format(1473473400269); // timestamp with ms\n     */\n\n  }, {\n    key: 'format',\n    value: function format(date, locale) {\n      return (0, _helper.formatDiff)((0, _helper.diffSec)(date, this.nowDate), locale, this.defaultLocale);\n    }\n  }]);\n\n  return TimeAgo;\n}();","export const itemsActionType = {\n  SYNC: Symbol(\"items/sync\")\n};\n","import { itemsActionType } from \"../actionTypes/ItemsActionType\";\n\nexport const itemsAction = {\n  sync: (items) => {\n    return {\n      type: itemsActionType.SYNC,\n      items: items\n    };\n  }\n};\n"],"sourceRoot":""}