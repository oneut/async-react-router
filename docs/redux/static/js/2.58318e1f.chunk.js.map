{"version":3,"sources":["reducers/index/index.js","reducers/index/items.js","components/index/ItemComponent.js","components/index/ItemsComponent.js","containers/IndexContainer.js","pages/IndexPage.js","../node_modules/timeago.js/lib/constant.js","../node_modules/timeago.js/lib/helper.js","../node_modules/timeago.js/lib/locales.js","../node_modules/timeago.js/lib/timer.js","api/HackerNewsApi.js","components/common/Header.js","../node_modules/timeago.js/lib/index.js","models/Item.js","../node_modules/timeago.js/lib/TimeAgo.js","actionTypes/ItemsActionType.js","actions/ItemsAction.js"],"names":["rootReducer","combineReducers","items","state","arguments","length","undefined","Immutable","List","action","type","itemsActionType","SYNC","withMutations","newState","map","itemAttributes","push","Item","ItemComponent","react_default","a","createElement","className","href","this","props","item","getUrl","title","score","dist","to","URL","name","userId","by","getTimeAgo","itemId","id","descendants","React","Component","ItemsComponent","itemComponents","ItemComponent_ItemComponent","key","page","IndexContainer","Header","ItemsComponent_ItemsComponent","connect","IndexPage","_this","NotFoundPage","store","createStore","indexRootReducer","actions","bindActionCreators","itemsAction","dispatch","sync","es","containers_IndexContainer","NProgress","start","HackerNewsApi","getTopStoryItems","done","Object","defineProperty","exports","value","IndexMapEn","split","IndexMapZH","ATTR_DATA_TID","SEC_ARRAY","ATTR_TIMEAGO","ATTR_DATETIME","setTidAttr","getDateAttr","getAttr","nextInterval","diffSec","formatDiff","toDate","toInt","_constant","__webpack_require__","_locales","f","parseInt","input","Date","isNaN","test","trim","replace","diff","locale","defaultLocale","Locales","i","agoin","total_sec","Math","abs","date","nowDate","rst","d","ceil","node","getAttribute","attr","val","setAttribute","register","en","number","index","unit","zh_CN","func","run","cancel","Timers","_helper","clear","tid","clearTimeout","delay","setTimeout","hackerNewsApi","_Users_Takashi_GitHub_async_react_router_examples_redux_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","displayNumber","Firebase","apps","initializeApp","databaseURL","api","database","ref","cache","LRU","max","maxAge","getTopStoryItemIds","ids","offset","limit","Promise","all","slice","_ref","_Users_Takashi_GitHub_async_react_router_examples_redux_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_Takashi_GitHub_async_react_router_examples_redux_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","prev","next","findItem","abrupt","sent","stop","_x","apply","has","get","child","once","snapshot","set","concat","_ref2","_callee5","_context5","_this2","_x4","comments","_ref3","_callee6","comment","_context6","getComments","kids","_x5","react__WEBPACK_IMPORTED_MODULE_5___default","async_react_router__WEBPACK_IMPORTED_MODULE_6__","_TimeAgo","_timer","factory","TimeAgo","default","module","url","timeago","format","time","Record","_createClass","defineProperties","target","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","prototype","instance","TypeError","_classCallCheck","innerHTML","doRender","min","nodes","len","__webpack_exports__","Symbol","_actionTypes_ItemsActionType__WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/2.58318e1f.chunk.js","sourcesContent":["import { combineReducers } from \"redux\";\nimport items from \"./items\";\n\nconst rootReducer = combineReducers({\n  items\n});\n\nexport default rootReducer;\n","import Immutable from \"immutable\";\nimport Item from \"../../models/Item\";\nimport { itemsActionType } from \"../../actionTypes/ItemsActionType\";\n\nexport default function items(state = Immutable.List(), action) {\n  switch (action.type) {\n    case itemsActionType.SYNC:\n      const newState = Immutable.List();\n      return newState.withMutations((newState) => {\n        action.items.map((itemAttributes) =>\n          newState.push(new Item(itemAttributes))\n        );\n      });\n    default:\n      return state;\n  }\n}\n","import React from \"react\";\nimport { URL, Link } from \"async-react-router\";\n\nexport default class ItemComponent extends React.Component {\n  render() {\n    return (\n      <div className=\"news-item\">\n        <h3 className=\"title\">\n          <a href={this.props.item.getUrl()}>{this.props.item.title}</a>\n        </h3>\n        <div>\n          <ul className=\"list-inline\">\n            <li className=\"score\">{this.props.item.score} points</li>\n            <li className=\"by\">\n              by{\" \"}\n              <Link to={URL.name(\"UserPage\", { userId: this.props.item.by })}>\n                {this.props.item.by}\n              </Link>\n            </li>\n            <li className=\"time\">{this.props.item.getTimeAgo()}</li>\n            <li className=\"comments-link\">\n              <Link to={URL.name(\"ItemPage\", { itemId: this.props.item.id })}>\n                {this.props.item.descendants} comments\n              </Link>\n            </li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ItemComponent from \"./ItemComponent\";\nimport { URL, Link } from \"async-react-router\";\n\nexport default class ItemsComponent extends React.Component {\n  render() {\n    const itemComponents = this.props.items.map((item) => (\n      <ItemComponent key={item.id} item={item} />\n    ));\n    return (\n      <div className=\"container\">\n        {itemComponents}\n        <h3>\n          <Link to={URL.name(\"NewsPage\", { page: 2 })}>more</Link>\n        </h3>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport Header from \"../components/common/Header\";\nimport ItemsComponent from \"../components/index/ItemsComponent\";\n\nclass IndexContainer extends React.Component {\n  render() {\n    return (\n      <div>\n        <Header />\n        <ItemsComponent items={this.props.items} />\n      </div>\n    );\n  }\n}\n\nexport default connect((state) => ({\n  items: state.items\n}))(IndexContainer);\n","import NProgress from \"nprogress\";\nimport React from \"react\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport indexRootReducer from \"../reducers/index\";\nimport IndexContainer from \"../containers/IndexContainer\";\nimport HackerNewsApi from \"../api/HackerNewsApi\";\nimport NotFoundPage from \"./NotFoundPage\";\nimport { bindActionCreators } from \"redux\";\nimport { itemsAction } from \"../actions/ItemsAction\";\n\nexport default class IndexPage extends React.Component {\n  static initialPropsWillGet() {\n    NProgress.start();\n  }\n\n  static async getInitialProps() {\n    return {\n      items: await HackerNewsApi.getTopStoryItems()\n    };\n  }\n\n  static initialPropsDidGet() {\n    NProgress.done();\n  }\n\n  render() {\n    if (!this.props.items.length) return <NotFoundPage />;\n\n    const ProviderWrapper = () => {\n      const store = createStore(indexRootReducer);\n\n      const actions = {\n        items: bindActionCreators(itemsAction, store.dispatch)\n      };\n      actions.items.sync(this.props.items);\n\n      return (\n        <Provider store={store}>\n          <IndexContainer actions={actions} />\n        </Provider>\n      );\n    };\n\n    return <ProviderWrapper />;\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\nvar IndexMapEn = exports.IndexMapEn = 'second_minute_hour_day_week_month_year'.split('_');\nvar IndexMapZH = exports.IndexMapZH = '秒_分钟_小时_天_周_月_年'.split('_');\nvar ATTR_DATA_TID = exports.ATTR_DATA_TID = 'data-tid';\nvar SEC_ARRAY = exports.SEC_ARRAY = [60, 60, 24, 7, 365 / 7 / 12, 12];\nvar ATTR_TIMEAGO = exports.ATTR_TIMEAGO = 'data-timeago';\nvar ATTR_DATETIME = exports.ATTR_DATETIME = 'datetime';","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setTidAttr = exports.getDateAttr = exports.getAttr = exports.nextInterval = exports.diffSec = exports.formatDiff = exports.toDate = exports.toInt = undefined;\n\nvar _constant = require('./constant');\n\nvar _locales = require('./locales');\n/**\n * change f into int, remove decimal. Just for code compression\n * @param f\n * @returns {number}\n */\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar toInt = exports.toInt = function toInt(f) {\n  return parseInt(f);\n};\n/**\n * format Date / string / timestamp to Date instance.\n * @param input\n * @returns {*}\n */\n\n\nvar toDate = exports.toDate = function toDate(input) {\n  if (input instanceof Date) return input;\n  if (!isNaN(input) || /^\\d+$/.test(input)) return new Date(toInt(input));\n  input = (input || '').trim().replace(/\\.\\d+/, '') // remove milliseconds\n  .replace(/-/, '/').replace(/-/, '/').replace(/(\\d)T(\\d)/, '$1 $2').replace(/Z/, ' UTC') // 2017-2-5T3:57:52Z -> 2017-2-5 3:57:52UTC\n  .replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, ' $1$2'); // -04:00 -> -0400\n\n  return new Date(input);\n};\n/**\n * format the diff second to *** time ago, with setting locale\n * @param diff\n * @param locale\n * @param defaultLocale\n * @returns {string | void | *}\n */\n\n\nvar formatDiff = exports.formatDiff = function formatDiff(diff, locale, defaultLocale) {\n  // if locale is not exist, use defaultLocale.\n  // if defaultLocale is not exist, use build-in `en`.\n  // be sure of no error when locale is not exist.\n  locale = _locales.Locales[locale] ? locale : _locales.Locales[defaultLocale] ? defaultLocale : 'en';\n  var i = 0,\n      agoin = diff < 0 ? 1 : 0,\n      // timein or timeago\n  total_sec = diff = Math.abs(diff);\n\n  for (; diff >= _constant.SEC_ARRAY[i] && i < _constant.SEC_ARRAY.length; i++) {\n    diff /= _constant.SEC_ARRAY[i];\n  }\n\n  diff = toInt(diff);\n  i *= 2;\n  if (diff > (i === 0 ? 9 : 1)) i += 1;\n  return _locales.Locales[locale](diff, i, total_sec)[agoin].replace('%s', diff);\n};\n/**\n * calculate the diff second between date to be formatted an now date.\n * @param date\n * @param nowDate\n * @returns {number}\n */\n\n\nvar diffSec = exports.diffSec = function diffSec(date, nowDate) {\n  nowDate = nowDate ? toDate(nowDate) : new Date();\n  return (nowDate - toDate(date)) / 1000;\n};\n/**\n * nextInterval: calculate the next interval time.\n * - diff: the diff sec between now and date to be formatted.\n *\n * What's the meaning?\n * diff = 61 then return 59\n * diff = 3601 (an hour + 1 second), then return 3599\n * make the interval with high performance.\n **/\n\n\nvar nextInterval = exports.nextInterval = function nextInterval(diff) {\n  var rst = 1,\n      i = 0,\n      d = Math.abs(diff);\n\n  for (; diff >= _constant.SEC_ARRAY[i] && i < _constant.SEC_ARRAY.length; i++) {\n    diff /= _constant.SEC_ARRAY[i];\n    rst *= _constant.SEC_ARRAY[i];\n  }\n\n  d = d % rst;\n  d = d ? rst - d : rst;\n  return Math.ceil(d);\n};\n/**\n * get the node attribute, native DOM and jquery supported.\n * @param node\n * @param name\n * @returns {*}\n */\n\n\nvar getAttr = exports.getAttr = function getAttr(node, name) {\n  if (node.getAttribute) return node.getAttribute(name); // native dom\n\n  if (node.attr) return node.attr(name); // jquery dom\n};\n/**\n * get the datetime attribute, `data-timeagp` / `datetime` are supported.\n * @param node\n * @returns {*}\n */\n\n\nvar getDateAttr = exports.getDateAttr = function getDateAttr(node) {\n  return getAttr(node, _constant.ATTR_TIMEAGO) || getAttr(node, _constant.ATTR_DATETIME);\n};\n/**\n * set the node attribute, native DOM and jquery supported.\n * @param node\n * @param val\n * @returns {*}\n */\n\n\nvar setTidAttr = exports.setTidAttr = function setTidAttr(node, val) {\n  if (node.setAttribute) return node.setAttribute(_constant.ATTR_DATA_TID, val);\n  if (node.attr) return node.attr(_constant.ATTR_DATA_TID, val);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.register = exports.Locales = undefined;\n\nvar _constant = require('./constant');\n\nvar zh_CN = function zh_CN(number, index) {\n  if (index === 0) return ['刚刚', '片刻后'];\n\n  var unit = _constant.IndexMapZH[parseInt(index / 2)];\n\n  return [number + ' ' + unit + \"\\u524D\", number + ' ' + unit + \"\\u540E\"];\n};\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar en = function en(number, index) {\n  if (index === 0) return ['just now', 'right now'];\n\n  var unit = _constant.IndexMapEn[parseInt(index / 2)];\n\n  if (number > 1) unit += 's';\n  return [number + ' ' + unit + ' ago', 'in ' + number + ' ' + unit];\n};\n/**\n * 所有的语言\n * @type {{en: function(*, *), zh_CN: function(*, *)}}\n */\n\n\nvar Locales = exports.Locales = {\n  en: en,\n  zh_CN: zh_CN\n};\n/**\n * 注册语言\n * @param locale\n * @param func\n */\n\nvar register = exports.register = function register(locale, func) {\n  Locales[locale] = func;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.run = exports.cancel = exports.Timers = undefined;\n\nvar _helper = require('./helper');\n\nvar _constant = require('./constant'); // 所有的定时器\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar Timers = exports.Timers = [];\n\nvar clear = function clear(tid) {\n  if (tid) {\n    clearTimeout(tid);\n    delete Timers[tid];\n  }\n};\n/**\n * 取消定时器\n * @param node\n */\n\n\nvar cancel = exports.cancel = function cancel(node) {\n  if (node) clear((0, _helper.getAttr)(node, _constant.ATTR_DATA_TID)); // get the timer of DOM node(native / jq).\n  else for (var tid in Timers) {\n      clear(tid);\n    }\n};\n/**\n * 开启一个 timer\n * @param func\n * @param delay\n */\n\n\nvar run = exports.run = function run(func, delay) {\n  var tid = setTimeout(function () {\n    // 从 Timer 中删除\n    clear(tid); // 执行目标方法\n\n    func();\n  }, delay); // there is no need to save node in object. Just save the key\n\n  Timers[tid] = 0;\n  return tid;\n};","import Firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport LRU from \"lru-cache\";\n\nclass HackerNewsApi {\n  constructor() {\n    this.displayNumber = 20;\n\n    if (!Firebase.apps.length) {\n      Firebase.initializeApp({\n        databaseURL: \"https://hacker-news.firebaseio.com\"\n      });\n    }\n    this.api = Firebase.database().ref(\"/v0\");\n    this.cache = LRU({\n      max: 500,\n      maxAge: 1000 * 60 * 60\n    });\n  }\n\n  async getTopStoryItems(page = 1) {\n    const ids = await this.getTopStoryItemIds();\n    const offset = this.displayNumber * (page - 1);\n    const limit = offset + this.displayNumber;\n    return await Promise.all(\n      ids.slice(offset, limit).map(async (id) => await this.findItem(id))\n    );\n  }\n\n  async getTopStoryItemIds() {\n    if (this.cache.has(\"topstories\")) return this.cache.get(\"topstories\");\n    const snapshot = await this.api.child(\"/topstories\").once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(\"topstories\", value);\n    return value;\n  }\n\n  async findItem(id) {\n    if (this.cache.has(`item/${id}`)) return this.cache.get(`item/${id}`);\n    const snapshot = await this.api.child(`/item/${id}`).once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(`item/${id}`, value);\n    return value;\n  }\n\n  async getComments(ids) {\n    if (!ids) {\n      return [];\n    }\n\n    const comments = await Promise.all(\n      ids.map(async (id) => await this.findItem(id))\n    );\n    return await Promise.all(\n      comments.map(async (comment) => {\n        comment.comments = await this.getComments(comment.kids);\n        return comment;\n      })\n    );\n  }\n\n  async findUser(id) {\n    if (this.cache.has(`/user/${id}`)) return this.cache.get(`/user/${id}`);\n    const snapshot = await this.api.child(`/user/${id}`).once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(`/user/${id}`, value);\n    return value;\n  }\n}\n\nconst hackerNewsApi = new HackerNewsApi();\n\nexport default hackerNewsApi;\n","import React from \"react\";\nimport { URL, Link } from \"async-react-router\";\n\nexport default class Header extends React.Component {\n  render() {\n    return (\n      <header className=\"navbar navbar-default\">\n        <nav className=\"container\">\n          <div className=\"d-flex justify-content-between hidden-lg-up\">\n            <Link to={URL.name(\"IndexPage\")} className=\"navbar-brand\">\n              Redux Example - Hacker News\n            </Link>\n          </div>\n        </nav>\n      </header>\n    );\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _TimeAgo = require('./TimeAgo');\n\nvar _locales = require('./locales');\n\nvar _timer = require('./timer'); // 入口函数\n\n\nvar factory = function factory(nowDate, locale) {\n  return new _TimeAgo.TimeAgo(nowDate, locale);\n};\n/**\n * 注册语言\n */\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nfactory.register = _locales.register;\n/**\n * 终止定时器\n */\n\nfactory.cancel = _timer.cancel;\nexports.default = factory;\nmodule.exports = exports['default'];","import Immutable from \"immutable\";\nimport { URL } from \"async-react-router\";\nimport timeago from \"timeago.js\";\n\nconst ItemRecord = Immutable.Record({\n  by: \"\",\n  descendants: 0,\n  id: null,\n  score: 0,\n  time: null,\n  title: \"\",\n  type: \"\",\n  url: \"\",\n  kids: null\n});\n\nexport default class Item extends ItemRecord {\n  getUrl() {\n    if (this.url) {\n      return this.url;\n    }\n\n    return URL.name(\"ItemPage\", { itemId: this.id });\n  }\n\n  getTimeAgo() {\n    return timeago().format(new Date(this.time * 1000));\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TimeAgo = undefined;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar _helper = require('./helper');\n\nvar _timer = require('./timer');\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar TimeAgo = exports.TimeAgo = function () {\n  function TimeAgo(nowDate, defaultLocale) {\n    _classCallCheck(this, TimeAgo);\n\n    this.nowDate = nowDate;\n    this.defaultLocale = defaultLocale || 'en';\n  }\n\n  _createClass(TimeAgo, [{\n    key: 'setLocale',\n    value: function setLocale(locale) {\n      this.defaultLocale = locale;\n    }\n    /**\n     * render 定期器渲染\n     * @param node\n     * @param date\n     * @param locale\n     */\n\n  }, {\n    key: 'doRender',\n    value: function doRender(node, date, locale) {\n      var _this = this;\n\n      var diff = (0, _helper.diffSec)(date, this.nowDate); // render\n\n      node.innerHTML = (0, _helper.formatDiff)(diff, locale, this.defaultLocale); // waiting %s seconds, do the next render\n\n      var tid = (0, _timer.run)(function () {\n        _this.doRender(node, date, locale);\n      }, Math.min((0, _helper.nextInterval)(diff) * 1000, 0x7FFFFFFF)); // set attribute date-tid\n\n      (0, _helper.setTidAttr)(node, tid);\n    }\n    /**\n     * render: render the DOM real-time.\n     * - nodes: which nodes will be rendered.\n     * - locale: the locale name used to format date.\n     *\n     * How to use it?\n     * var timeago = require('timeago.js')();\n     * // 1. javascript selector\n     * timeago.render(document.querySelectorAll('.need_to_be_rendered'));\n     * // 2. use jQuery selector\n     * timeago.render($('.need_to_be_rendered'), 'pl');\n     *\n     * Notice: please be sure the dom has attribute `datetime`.\n     */\n\n  }, {\n    key: 'render',\n    value: function render(nodes, locale) {\n      // by .length\n      if (nodes.length === undefined) nodes = [nodes];\n      var node = void 0;\n\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        node = nodes[i]; // clear node's timer\n\n        (0, _timer.cancel)(node);\n        this.doRender(node, (0, _helper.getDateAttr)(node), locale); // render item\n      }\n    }\n    /**\n     * format: format the date to *** time ago, with setting or default locale\n     * - date: the date / string / timestamp to be formatted\n     * - locale: the formatted string's locale name, e.g. en / zh_CN\n     *\n     * How to use it?\n     * var timeago = require('timeago.js')();\n     * timeago.format(new Date(), 'pl'); // Date instance\n     * timeago.format('2016-09-10', 'fr'); // formated date string\n     * timeago.format(1473473400269); // timestamp with ms\n     */\n\n  }, {\n    key: 'format',\n    value: function format(date, locale) {\n      return (0, _helper.formatDiff)((0, _helper.diffSec)(date, this.nowDate), locale, this.defaultLocale);\n    }\n  }]);\n\n  return TimeAgo;\n}();","export const itemsActionType = {\n  SYNC: Symbol(\"items/sync\")\n};\n","import { itemsActionType } from \"../actionTypes/ItemsActionType\";\n\nexport const itemsAction = {\n  sync: (items) => {\n    return {\n      type: itemsActionType.SYNC,\n      items: items\n    };\n  }\n};\n"],"sourceRoot":""}