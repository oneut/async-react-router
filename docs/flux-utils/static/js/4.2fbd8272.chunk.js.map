{"version":3,"sources":["../node_modules/timeago.js/lib/constant.js","api/HackerNewsApi.js","../node_modules/timeago.js/lib/helper.js","../node_modules/timeago.js/lib/locales.js","../node_modules/timeago.js/lib/timer.js","components/common/Header.js","../node_modules/timeago.js/lib/index.js","models/Item.js","../node_modules/timeago.js/lib/TimeAgo.js","components/item/CommentComponent.js","components/item/ItemComponent.js","containers/ItemContainer.js","actionTypes/CommentsType.js","actions/item/CommentsAction.js","actionTypes/ItemType.js","actions/item/ItemAction.js","stores/ItemStore.js","models/Comment.js","stores/CommentsStore.js","pages/ItemPage.js","dispatchers/ItemDispatcher.js"],"names":["Object","defineProperty","exports","value","IndexMapEn","split","IndexMapZH","ATTR_DATA_TID","SEC_ARRAY","ATTR_TIMEAGO","ATTR_DATETIME","hackerNewsApi","HackerNewsApi","_Users_Takashi_GitHub_async_react_router_examples_flux_utils_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","this","displayNumber","Firebase","apps","length","initializeApp","databaseURL","api","database","ref","cache","LRU","max","maxAge","page","getTopStoryItemIds","ids","offset","limit","Promise","all","slice","map","_ref","_Users_Takashi_GitHub_async_react_router_examples_flux_utils_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_Takashi_GitHub_async_react_router_examples_flux_utils_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","id","wrap","_context","prev","next","_this","findItem","abrupt","sent","stop","_x","apply","arguments","has","get","child","once","snapshot","val","set","concat","_ref2","_callee5","_context5","_this2","_x4","comments","_ref3","_callee6","comment","_context6","getComments","kids","_x5","setTidAttr","getDateAttr","getAttr","nextInterval","diffSec","formatDiff","toDate","toInt","undefined","_constant","__webpack_require__","_locales","f","parseInt","input","Date","isNaN","test","trim","replace","diff","locale","defaultLocale","Locales","i","agoin","total_sec","Math","abs","date","nowDate","rst","d","ceil","node","name","getAttribute","attr","setAttribute","register","en","number","index","unit","zh_CN","func","run","cancel","Timers","_helper","clear","tid","clearTimeout","delay","setTimeout","Header","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","className","async_react_router__WEBPACK_IMPORTED_MODULE_6__","to","URL","React","Component","_TimeAgo","_timer","factory","TimeAgo","default","module","Item","url","itemId","timeago","format","time","Immutable","Record","by","descendants","score","title","type","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","instance","TypeError","_classCallCheck","innerHTML","doRender","min","nodes","len","CommentComponent","commentComponents","filter","react_default","dist","userId","getTimeAgo","dangerouslySetInnerHTML","__html","text","ItemComponent","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","isLoading","commentApiStream","from","item","subscribe","actions","commentsAction","sync","setState","unsubscribe","loadingComponent","getLoadingComponent","getCommentComponents","href","getUrl","isEmpty","CommentComponent_CommentComponent","ItemContainer","ItemComponent_ItemComponent","stores","commentsStore","itemStore","prevState","getState","itemContainer","Container","create","withProps","commentsType","SYNC","Symbol","CommentsAction","dispatcher","dispatch","itemType","NEW_INSTANCE","ItemAction","attributes","ItemStore","action","ADD_COMMENTS","ReduceStore","Comment","newCommentList","List","withMutations","commentAttributes","push","parent","CommentsStore","newState","forEach","ItemPage","NotFoundPage","itemDispatcher","Dispatcher","itemAction","newItemStore","newCommentsAction","newCommentsStore","newInstance","params","containers_ItemContainer","NProgress","start","done"],"mappings":"0FAEAA,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAOAD,EAAAE,WAAA,yCAAAC,MAAA,KACAH,EAAAI,WAAA,+DAAAD,MAAA,KACAH,EAAAK,cAAA,WACAL,EAAAM,UAAA,yBACAN,EAAAO,aAAA,eACAP,EAAAQ,cAAA,yICuDMC,EAAgB,eAjEpB,SAAAC,IAAeZ,OAAAa,EAAA,EAAAb,CAAAc,KAAAF,GACbE,KAAKC,cAAgB,GAEhBC,IAASC,KAAKC,QACjBF,IAASG,cAAc,CACrBC,YAAa,uCAGjBN,KAAKO,IAAML,IAASM,WAAWC,IAAI,OACnCT,KAAKU,MAAQC,IAAI,CACfC,IAAK,IACLC,OAAQ,oNAIWC,iCAAO,WACVd,KAAKe,mCAAjBC,SACAC,EAASjB,KAAKC,eAAiBa,EAAO,GACtCI,EAAQD,EAASjB,KAAKC,uBACfkB,QAAQC,IACnBJ,EAAIK,MAAMJ,EAAQC,GAAOI,IAAzB,eAAAC,EAAArC,OAAAsC,EAAA,EAAAtC,CAAAuC,EAAAC,EAAAC,KAA6B,SAAAC,EAAOC,GAAP,OAAAJ,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAAoBC,EAAKC,SAASN,GAAlC,cAAAE,EAAAK,OAAA,SAAAL,EAAAM,MAAA,wBAAAN,EAAAO,SAAAV,EAAA5B,SAA7B,gBAAAuC,GAAA,OAAAhB,EAAAiB,MAAAxC,KAAAyC,YAAA,gTAKEzC,KAAKU,MAAMgC,IAAI,uDAAsB1C,KAAKU,MAAMiC,IAAI,sCACjC3C,KAAKO,IAAIqC,MAAM,eAAeC,KAAK,uBAApDC,SACAzD,EAAQyD,EAASC,MACvB/C,KAAKU,MAAMsC,IAAI,aAAc3D,qBACtBA,8KAGMwC,+EACT7B,KAAKU,MAAMgC,IAAX,QAAAO,OAAuBpB,6CAAc7B,KAAKU,MAAMiC,IAAX,QAAAM,OAAuBpB,4BACzC7B,KAAKO,IAAIqC,MAAT,SAAAK,OAAwBpB,IAAMgB,KAAK,uBAApDC,SACAzD,EAAQyD,EAASC,MACvB/C,KAAKU,MAAMsC,IAAX,QAAAC,OAAuBpB,GAAMxC,qBACtBA,kLAGS2B,mFACXA,2CACI,2BAGcG,QAAQC,IAC7BJ,EAAIM,IAAJ,eAAA4B,EAAAhE,OAAAsC,EAAA,EAAAtC,CAAAuC,EAAAC,EAAAC,KAAQ,SAAAwB,EAAOtB,GAAP,OAAAJ,EAAAC,EAAAI,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAnB,MAAA,cAAAmB,EAAAnB,KAAA,EAAoBoB,EAAKlB,SAASN,GAAlC,cAAAuB,EAAAhB,OAAA,SAAAgB,EAAAf,MAAA,wBAAAe,EAAAd,SAAAa,EAAAnD,SAAR,gBAAAsD,GAAA,OAAAJ,EAAAV,MAAAxC,KAAAyC,YAAA,mBADIc,kBAGOpC,QAAQC,IACnBmC,EAASjC,IAAT,eAAAkC,EAAAtE,OAAAsC,EAAA,EAAAtC,CAAAuC,EAAAC,EAAAC,KAAa,SAAA8B,EAAOC,GAAP,OAAAjC,EAAAC,EAAAI,KAAA,SAAA6B,GAAA,cAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,cAAA0B,EAAA1B,KAAA,EACcoB,EAAKO,YAAYF,EAAQG,MADvC,cACXH,EAAQH,SADGI,EAAAtB,KAAAsB,EAAAvB,OAAA,SAEJsB,GAFI,wBAAAC,EAAArB,SAAAmB,EAAAzD,SAAb,gBAAA8D,GAAA,OAAAN,EAAAhB,MAAAxC,KAAAyC,YAAA,yNAOWZ,+EACT7B,KAAKU,MAAMgC,IAAX,SAAAO,OAAwBpB,6CAAc7B,KAAKU,MAAMiC,IAAX,SAAAM,OAAwBpB,4BAC3C7B,KAAKO,IAAIqC,MAAT,SAAAK,OAAwBpB,IAAMgB,KAAK,uBAApDC,SACAzD,EAAQyD,EAASC,MACvB/C,KAAKU,MAAMsC,IAAX,SAAAC,OAAwBpB,GAAMxC,qBACvBA,gHAMIQ,wCCtEfX,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAA2E,WAAA3E,EAAA4E,YAAA5E,EAAA6E,QAAA7E,EAAA8E,aAAA9E,EAAA+E,QAAA/E,EAAAgF,WAAAhF,EAAAiF,OAAAjF,EAAAkF,WAAAC,EAEA,IAAAC,EAAgBC,EAAQ,KAExBC,EAAeD,EAAQ,KAavBH,EAAAlF,EAAAkF,MAAA,SAAAK,GACA,OAAAC,SAAAD,IASAN,EAAAjF,EAAAiF,OAAA,SAAAQ,GACA,OAAAA,aAAAC,KAAAD,GACAE,MAAAF,IAAA,QAAAG,KAAAH,GAAA,IAAAC,KAAAR,EAAAO,KACAA,MAAA,IAAAI,OAAAC,QAAA,YACAA,QAAA,SAAAA,QAAA,SAAAA,QAAA,qBAAAA,QAAA,YACAA,QAAA,iCAEA,IAAAJ,KAAAD,KA2EAZ,GAhEA7E,EAAAgF,WAAA,SAAAe,EAAAC,EAAAC,GAIAD,EAAAV,EAAAY,QAAAF,KAAAV,EAAAY,QAAAD,KAAA,KAMA,IALA,IAAAE,EAAA,EACAC,EAAAL,EAAA,MAEAM,EAAAN,EAAAO,KAAAC,IAAAR,GAEQA,GAAAX,EAAA9E,UAAA6F,MAAAf,EAAA9E,UAAAU,OAAkEmF,IAC1EJ,GAAAX,EAAA9E,UAAA6F,GAMA,OAHAJ,EAAAb,EAAAa,KAEA,KADAI,GAAA,GACA,OAAAA,GAAA,GACAb,EAAAY,QAAAF,GAAAD,EAAAI,EAAAE,GAAAD,GAAAN,QAAA,KAAAC,IAUA/F,EAAA+E,QAAA,SAAAyB,EAAAC,GAEA,QADAA,IAAAxB,EAAAwB,GAAA,IAAAf,MACAT,EAAAuB,IAAA,KAaAxG,EAAA8E,aAAA,SAAAiB,GAKA,IAJA,IAAAW,EAAA,EACAP,EAAA,EACAQ,EAAAL,KAAAC,IAAAR,GAEQA,GAAAX,EAAA9E,UAAA6F,MAAAf,EAAA9E,UAAAU,OAAkEmF,IAC1EJ,GAAAX,EAAA9E,UAAA6F,GACAO,GAAAtB,EAAA9E,UAAA6F,GAKA,OADAQ,GADAA,GAAAD,GACAA,EAAAC,EAAAD,EACAJ,KAAAM,KAAAD,IAUA3G,EAAA6E,QAAA,SAAAgC,EAAAC,GACA,OAAAD,EAAAE,aAAAF,EAAAE,aAAAD,GAEAD,EAAAG,KAAAH,EAAAG,KAAAF,QAAA,IASA9G,EAAA4E,YAAA,SAAAiC,GACA,OAAAhC,EAAAgC,EAAAzB,EAAA7E,eAAAsE,EAAAgC,EAAAzB,EAAA5E,gBAUAR,EAAA2E,WAAA,SAAAkC,EAAAlD,GACA,OAAAkD,EAAAI,aAAAJ,EAAAI,aAAA7B,EAAA/E,cAAAsD,GACAkD,EAAAG,KAAAH,EAAAG,KAAA5B,EAAA/E,cAAAsD,QAAA,qCCzIA7D,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAkH,SAAAlH,EAAAkG,aAAAf,EAEA,IAAAC,EAAgBC,EAAQ,KA6BxBa,EAAAlG,EAAAkG,QAAA,CACAiB,GAfA,SAAAC,EAAAC,GACA,OAAAA,EAAA,+BAEA,IAAAC,EAAAlC,EAAAlF,WAAAsF,SAAA6B,EAAA,IAGA,OADAD,EAAA,IAAAE,GAAA,KACA,CAAAF,EAAA,IAAAE,EAAA,aAAAF,EAAA,IAAAE,IAUAC,MA7BA,SAAAH,EAAAC,GACA,OAAAA,EAAA,4CAEA,IAAAC,EAAAlC,EAAAhF,WAAAoF,SAAA6B,EAAA,IAEA,OAAAD,EAAA,IAAAE,EAAA,SAAAF,EAAA,IAAAE,EAAA,YAgCAtH,EAAAkH,SAAA,SAAAlB,EAAAwB,GACAtB,EAAAF,GAAAwB,qCC7CA1H,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAAyH,IAAAzH,EAAA0H,OAAA1H,EAAA2H,YAAAxC,EAEA,IAAAyC,EAAcvC,EAAQ,KAEtBD,EAAgBC,EAAQ,KAQxBsC,EAAA3H,EAAA2H,OAAA,GAEAE,EAAA,SAAAC,GACAA,IACAC,aAAAD,UACAH,EAAAG,KASA9H,EAAA0H,OAAA,SAAAb,GACA,GAAAA,EAAAgB,GAAA,EAAAD,EAAA/C,SAAAgC,EAAAzB,EAAA/E,qBACA,QAAAyH,KAAAH,EACAE,EAAAC,IAUA9H,EAAAyH,IAAA,SAAAD,EAAAQ,GACA,IAAAF,EAAAG,WAAA,WAEAJ,EAAAC,GAEAN,KACGQ,GAGH,OADAL,EAAAG,GAAA,EACAA,0IClDqBI,mLAEjB,OACEC,EAAA7F,EAAA8F,cAAA,UAAQC,UAAU,yBAChBF,EAAA7F,EAAA8F,cAAA,OAAKC,UAAU,aACbF,EAAA7F,EAAA8F,cAAA,OAAKC,UAAU,+CACbF,EAAA7F,EAAA8F,cAACE,EAAA,KAAD,CAAMC,GAAIC,MAAI1B,KAAK,aAAcuB,UAAU,gBAA3C,8CANwBI,IAAMC,6CCD1C5I,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAGA,IAAA0I,EAAetD,EAAQ,KAEvBC,EAAeD,EAAQ,KAEvBuD,EAAavD,EAAQ,KAGrBwD,EAAA,SAAApC,EAAAT,GACA,WAAA2C,EAAAG,QAAArC,EAAAT,IAYA6C,EAAA3B,SAAA5B,EAAA4B,SAKA2B,EAAAnB,OAAAkB,EAAAlB,OACA1H,EAAA+I,QAAAF,EACAG,EAAAhJ,UAAA,kKCjBqBiJ,mLAEjB,OAAIrI,KAAKsI,IACAtI,KAAKsI,IAGPV,MAAI1B,KAAK,WAAY,CAAEqC,OAAQvI,KAAK6B,0CAI3C,OAAO2G,MAAUC,OAAO,IAAI3D,KAAiB,IAAZ9E,KAAK0I,cAtBvBC,IAAUC,OAAO,CAClCC,GAAI,GACJC,YAAa,EACbjH,GAAI,KACJkH,MAAO,EACPL,KAAM,KACNM,MAAO,GACPC,KAAM,GACNX,IAAK,GACLzE,KAAM,0CCXR3E,OAAAC,eAAAC,EAAA,cACAC,OAAA,IAEAD,EAAA8I,aAAA3D,EAEA,IAAA2E,EAAA,WACA,SAAAC,EAAAC,EAAAC,GACA,QAAA9D,EAAA,EAAmBA,EAAA8D,EAAAjJ,OAAkBmF,IAAA,CACrC,IAAA+D,EAAAD,EAAA9D,GACA+D,EAAAC,WAAAD,EAAAC,aAAA,EACAD,EAAAE,cAAA,EACA,UAAAF,MAAAG,UAAA,GACAvK,OAAAC,eAAAiK,EAAAE,EAAAI,IAAAJ,IAIA,gBAAAK,EAAAC,EAAAC,GAGA,OAFAD,GAAAT,EAAAQ,EAAAG,UAAAF,GACAC,GAAAV,EAAAQ,EAAAE,GACAF,GAdA,GAuBA3C,EAAcvC,EAAQ,KAEtBuD,EAAavD,EAAQ,KAQrBrF,EAAA8I,QAAA,WACA,SAAAA,EAAArC,EAAAR,IAPA,SAAA0E,EAAAJ,GACA,KAAAI,aAAAJ,GACA,UAAAK,UAAA,qCAMAC,CAAAjK,KAAAkI,GAEAlI,KAAA6F,UACA7F,KAAAqF,iBAAA,KA8EA,OA3EA6D,EAAAhB,EAAA,EACAwB,IAAA,YACArK,MAAA,SAAA+F,GACApF,KAAAqF,cAAAD,IASG,CACHsE,IAAA,WACArK,MAAA,SAAA4G,EAAAL,EAAAR,GACA,IAAAlD,EAAAlC,KAEAmF,GAAA,EAAA6B,EAAA7C,SAAAyB,EAAA5F,KAAA6F,SAEAI,EAAAiE,WAAA,EAAAlD,EAAA5C,YAAAe,EAAAC,EAAApF,KAAAqF,eAEA,IAAA6B,GAAA,EAAAc,EAAAnB,KAAA,WACA3E,EAAAiI,SAAAlE,EAAAL,EAAAR,IACOM,KAAA0E,IAAA,OAAApD,EAAA9C,cAAAiB,GAAA,cAEP,EAAA6B,EAAAjD,YAAAkC,EAAAiB,KAiBG,CACHwC,IAAA,SACArK,MAAA,SAAAgL,EAAAjF,QAEAb,IAAA8F,EAAAjK,SAAAiK,EAAA,CAAAA,IAGA,IAFA,IAAApE,OAAA,EAEAV,EAAA,EAAA+E,EAAAD,EAAAjK,OAAyCmF,EAAA+E,EAAS/E,IAClDU,EAAAoE,EAAA9E,IAEA,EAAAyC,EAAAlB,QAAAb,GACAjG,KAAAmK,SAAAlE,GAAA,EAAAe,EAAAhD,aAAAiC,GAAAb,KAeG,CACHsE,IAAA,SACArK,MAAA,SAAAuG,EAAAR,GACA,SAAA4B,EAAA5C,aAAA,EAAA4C,EAAA7C,SAAAyB,EAAA5F,KAAA6F,SAAAT,EAAApF,KAAAqF,mBAIA6C,EAnFA,+LCrCqBqC,mLAEjB,IAAMC,EAAoBxK,KAAKqJ,MAAM3F,QAAQH,SAC1CkH,OAAO,SAAC/G,GAAD,QAAeA,EAAQmF,KAC9BvH,IAAI,SAACoC,GAAD,OACHgH,EAAAhJ,EAAA8F,cAAC+C,EAAD,CAAkBb,IAAKhG,EAAQ7B,GAAI6B,QAASA,MAEhD,OACEgH,EAAAhJ,EAAA8F,cAAA,UACEkD,EAAAhJ,EAAA8F,cAAA,UACEkD,EAAAhJ,EAAA8F,cAAA,UACEkD,EAAAhJ,EAAA8F,cAAA,MAAIC,UAAU,eACZiD,EAAAhJ,EAAA8F,cAAA,MAAIC,UAAU,MACZiD,EAAAhJ,EAAA8F,cAACmD,EAAA,KAAD,CACEhD,GAAIC,MAAI1B,KAAK,WAAY,CAAE0E,OAAQ5K,KAAKqJ,MAAM3F,QAAQmF,MAErD7I,KAAKqJ,MAAM3F,QAAQmF,KAGxB6B,EAAAhJ,EAAA8F,cAAA,MAAIC,UAAU,QAAQzH,KAAKqJ,MAAM3F,QAAQmH,gBAG7CH,EAAAhJ,EAAA8F,cAAA,UACEkD,EAAAhJ,EAAA8F,cAAA,KAAGsD,wBAAyB,CAAEC,OAAQ/K,KAAKqJ,MAAM3F,QAAQsH,QACzDN,EAAAhJ,EAAA8F,cAAA,UAAKgD,aAxB6B3C,IAAMC,WCG/BmD,cACnB,SAAAA,EAAY5B,GAAO,IAAAnH,EAAA,OAAAhD,OAAAgM,EAAA,EAAAhM,CAAAc,KAAAiL,IACjB/I,EAAAhD,OAAAiM,EAAA,EAAAjM,CAAAc,KAAAd,OAAAkM,EAAA,EAAAlM,CAAA+L,GAAAI,KAAArL,KAAMqJ,KAEDiC,MAAQ,CACXC,WAAW,GAGbrJ,EAAKsJ,iBAAmB,KAPPtJ,mFAUC,IAAAmB,EAAArD,KAClBA,KAAKwL,iBAAmBC,YACtB3L,IAAc8D,YAAY5D,KAAKqJ,MAAMqC,KAAK7H,OAC1C8H,UAAU,SAACpI,GACXF,EAAKgG,MAAMuC,QAAQC,eAAeC,KAAKvI,GACvCF,EAAK0I,SAAS,CAAER,WAAW,qDAK7BvL,KAAKwL,iBAAiBQ,+CAItB,IAAMC,EAAmBjM,KAAKkM,sBACxB1B,EAAoBxK,KAAKmM,uBAC/B,OACEzB,EAAAhJ,EAAA8F,cAAA,OAAKC,UAAU,aACbiD,EAAAhJ,EAAA8F,cAAA,OAAKC,UAAU,aACbiD,EAAAhJ,EAAA8F,cAAA,MAAIC,UAAU,SACZiD,EAAAhJ,EAAA8F,cAAA,KAAG4E,KAAMpM,KAAKqJ,MAAMqC,KAAKW,UAAWrM,KAAKqJ,MAAMqC,KAAK1C,QAEtD0B,EAAAhJ,EAAA8F,cAAA,WACEkD,EAAAhJ,EAAA8F,cAAA,MAAIC,UAAU,eACZiD,EAAAhJ,EAAA8F,cAAA,MAAIC,UAAU,SAASzH,KAAKqJ,MAAMqC,KAAK3C,MAAvC,WACA2B,EAAAhJ,EAAA8F,cAAA,MAAIC,UAAU,MAAd,KACK,IACHiD,EAAAhJ,EAAA8F,cAACmD,EAAA,KAAD,CACEhD,GAAIC,MAAI1B,KAAK,WAAY,CAAE0E,OAAQ5K,KAAKqJ,MAAMqC,KAAK7C,KACnDpB,UAAU,IAETzH,KAAKqJ,MAAMqC,KAAK7C,KAGrB6B,EAAAhJ,EAAA8F,cAAA,MAAIC,UAAU,QAAQzH,KAAKqJ,MAAMqC,KAAKb,iBAI5CH,EAAAhJ,EAAA8F,cAAA,WACEkD,EAAAhJ,EAAA8F,cAAA,qBAAayE,GACbvB,EAAAhJ,EAAA8F,cAAA,UAAKgD,oDAOX,OAAIxK,KAAKsL,MAAMC,UACNb,EAAAhJ,EAAA8F,cAAA,uBAGLxH,KAAKqJ,MAAM9F,SAAS+I,UACf5B,EAAAhJ,EAAA8F,cAAA,6BAGFxH,KAAKqJ,MAAM9F,SACfkH,OAAO,SAAC/G,GAAD,QAAeA,EAAQmF,KAC9BvH,IAAI,SAACoC,GAAD,OACHgH,EAAAhJ,EAAA8F,cAAC+E,EAAD,CAAkB7C,IAAKhG,EAAQ7B,GAAI6B,QAASA,oDAKhD,OAAI1D,KAAKsL,MAAMC,UAEXb,EAAAhJ,EAAA8F,cAAA,YACEkD,EAAAhJ,EAAA8F,cAAA,KAAGC,UAAU,iCAKZ,YAlFgCI,IAAMC,WCD3C0E,mLAaF,OACE9B,EAAAhJ,EAAA8F,cAAA,WACEkD,EAAAhJ,EAAA8F,cAACF,EAAA,EAAD,MACAoD,EAAAhJ,EAAA8F,cAACiF,EAAD,CACEb,QAAS5L,KAAKqJ,MAAMuC,QACpBrI,SAAUvD,KAAKsL,MAAM/H,SACrBmI,KAAM1L,KAAKsL,MAAMI,4CAlBRrC,GACf,MAAO,CAACA,EAAMqD,OAAOC,cAAetD,EAAMqD,OAAOE,kDAG7BC,EAAWxD,GAC/B,MAAO,CACL9F,SAAU8F,EAAMqD,OAAOC,cAAcG,WACrCpB,KAAMrC,EAAMqD,OAAOE,UAAUE,mBARPjF,IAAMC,WA6BnBiF,EAHOC,YAAUC,OAAOT,EAAe,CACpDU,WAAW,qBChCN,IAAMC,EAAe,CAC1BC,KAAMC,OAAO,kBCCTC,aACJ,SAAAA,EAAYC,GAAarO,OAAAgM,EAAA,EAAAhM,CAAAc,KAAAsN,GACvBtN,KAAKuN,WAAaA,mDAGfhK,GACHvD,KAAKuN,WAAWC,SAAS,CACvBvE,KAAMkE,EAAaC,KACnB7J,SAAUA,aCVT,IAAMkK,EAAW,CACtBC,aAAcL,OAAO,qBCCjBM,aACJ,SAAAA,EAAYJ,GAAarO,OAAAgM,EAAA,EAAAhM,CAAAc,KAAA2N,GACvB3N,KAAKuN,WAAaA,0DAGRK,GACV5N,KAAKuN,WAAWC,SAAS,CACvBvE,KAAMwE,EAASC,aACfE,WAAYA,0BCNZC,4LAEF,OAAO,oCAGFvC,EAAOwC,GACZ,OAAQA,EAAO7E,MACb,KAAKwE,EAASC,aACZ,OAAO,IAAIrF,IAAKyF,EAAOF,YACzB,KAAKH,EAASM,aACZ,OAAO1F,IACT,QACE,OAAOiD,UAZS0C,uDCSHC,cACnB,SAAAA,EAAYL,GAAa1O,OAAAgM,EAAA,EAAAhM,CAAAc,KAAAiO,GACvB,IAAMC,EAAiBvF,IAAUwF,OADX,OAEtBP,EAAWrK,SAAW2K,EAAeE,cAAc,SAAAF,GACjDN,EAAWrK,SAASjC,IAAI,SAAA+M,GAAiB,OACvCH,EAAeI,KAAK,IAAIL,EAAQI,QAJdnP,OAAAiM,EAAA,EAAAjM,CAAAc,KAAAd,OAAAkM,EAAA,EAAAlM,CAAA+O,GAAA5C,KAAArL,KAOhB4N,8EAIN,OAAOpF,MAAUC,OAAO,IAAI3D,KAAiB,IAAZ9E,KAAK0I,cAtBpBC,IAAUC,OAAO,CACrCC,GAAI,GACJhH,GAAI,EACJ0M,OAAQ,EACRvD,KAAM,GACNtC,KAAM,KACNO,KAAM,GACN1F,SAAU,MCLNiL,4LAEF,OAAO7F,IAAUwF,sCAGZ7C,EAAOwC,GACZ,OAAQA,EAAO7E,MACb,KAAKkE,EAAaC,KAEhB,OADiBzE,IAAUwF,OACXC,cAAc,SAAAK,GAC5BX,EAAOvK,SAASmL,QAAQ,SAAAL,GAAiB,OACvCI,EAASH,KAAK,IAAIL,EAAQI,QAGhC,QACE,OAAO/C,UAfa0C,yDCMPW,mLAgBjB,IAAK3O,KAAKqJ,MAAMqC,KAAM,OAAOhB,EAAAhJ,EAAA8F,cAACoH,EAAA,EAAD,MAE7B,IAAMC,EC1BD,IAAIC,aD2BHC,EJdD,IAAIpB,EIcwBkB,GAC3BjC,EHVH,SAAsBW,GAC3B,OAAO,IAAIM,EAAUN,GGSDyB,CAAaH,GACzBhD,ENjBH,SAA2B0B,GAChC,OAAO,IAAID,EAAeC,GMgBD0B,CAAkBJ,GACnClC,EDRH,SAA0BY,GAC/B,OAAO,IAAIiB,EAAcjB,GCOD2B,CAAiBL,GACvCE,EAAWI,YAAYnP,KAAKqJ,MAAMqC,MAElC,IAAM0D,EAAS,CACb1C,OAAQ,CACNC,gBACAC,aAEFhB,QAAS,CACPC,mBAIJ,OAAOnB,EAAAhJ,EAAA8F,cAAC6H,EAAkBD,mDAjC1BE,IAAUC,wFAGiB3B,mFAEb9N,IAAcqC,SAASyL,EAAWwB,OAAO7G,qDAArDmD,4JAKF4D,IAAUE,cAZwB3H,IAAMC","file":"static/js/4.2fbd8272.chunk.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\nvar IndexMapEn = exports.IndexMapEn = 'second_minute_hour_day_week_month_year'.split('_');\nvar IndexMapZH = exports.IndexMapZH = '秒_分钟_小时_天_周_月_年'.split('_');\nvar ATTR_DATA_TID = exports.ATTR_DATA_TID = 'data-tid';\nvar SEC_ARRAY = exports.SEC_ARRAY = [60, 60, 24, 7, 365 / 7 / 12, 12];\nvar ATTR_TIMEAGO = exports.ATTR_TIMEAGO = 'data-timeago';\nvar ATTR_DATETIME = exports.ATTR_DATETIME = 'datetime';","import Firebase from \"firebase/app\";\nimport \"firebase/database\";\nimport LRU from \"lru-cache\";\n\nclass HackerNewsApi {\n  constructor() {\n    this.displayNumber = 20;\n\n    if (!Firebase.apps.length) {\n      Firebase.initializeApp({\n        databaseURL: \"https://hacker-news.firebaseio.com\"\n      });\n    }\n    this.api = Firebase.database().ref(\"/v0\");\n    this.cache = LRU({\n      max: 500,\n      maxAge: 1000 * 60 * 60\n    });\n  }\n\n  async getTopStoryItems(page = 1) {\n    const ids = await this.getTopStoryItemIds();\n    const offset = this.displayNumber * (page - 1);\n    const limit = offset + this.displayNumber;\n    return await Promise.all(\n      ids.slice(offset, limit).map(async (id) => await this.findItem(id))\n    );\n  }\n\n  async getTopStoryItemIds() {\n    if (this.cache.has(\"topstories\")) return this.cache.get(\"topstories\");\n    const snapshot = await this.api.child(\"/topstories\").once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(\"topstories\", value);\n    return value;\n  }\n\n  async findItem(id) {\n    if (this.cache.has(`item/${id}`)) return this.cache.get(`item/${id}`);\n    const snapshot = await this.api.child(`/item/${id}`).once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(`item/${id}`, value);\n    return value;\n  }\n\n  async getComments(ids) {\n    if (!ids) {\n      return [];\n    }\n\n    const comments = await Promise.all(\n      ids.map(async (id) => await this.findItem(id))\n    );\n    return await Promise.all(\n      comments.map(async (comment) => {\n        comment.comments = await this.getComments(comment.kids);\n        return comment;\n      })\n    );\n  }\n\n  async findUser(id) {\n    if (this.cache.has(`/user/${id}`)) return this.cache.get(`/user/${id}`);\n    const snapshot = await this.api.child(`/user/${id}`).once(\"value\");\n    const value = snapshot.val();\n    this.cache.set(`/user/${id}`, value);\n    return value;\n  }\n}\n\nconst hackerNewsApi = new HackerNewsApi();\n\nexport default hackerNewsApi;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setTidAttr = exports.getDateAttr = exports.getAttr = exports.nextInterval = exports.diffSec = exports.formatDiff = exports.toDate = exports.toInt = undefined;\n\nvar _constant = require('./constant');\n\nvar _locales = require('./locales');\n/**\n * change f into int, remove decimal. Just for code compression\n * @param f\n * @returns {number}\n */\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar toInt = exports.toInt = function toInt(f) {\n  return parseInt(f);\n};\n/**\n * format Date / string / timestamp to Date instance.\n * @param input\n * @returns {*}\n */\n\n\nvar toDate = exports.toDate = function toDate(input) {\n  if (input instanceof Date) return input;\n  if (!isNaN(input) || /^\\d+$/.test(input)) return new Date(toInt(input));\n  input = (input || '').trim().replace(/\\.\\d+/, '') // remove milliseconds\n  .replace(/-/, '/').replace(/-/, '/').replace(/(\\d)T(\\d)/, '$1 $2').replace(/Z/, ' UTC') // 2017-2-5T3:57:52Z -> 2017-2-5 3:57:52UTC\n  .replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, ' $1$2'); // -04:00 -> -0400\n\n  return new Date(input);\n};\n/**\n * format the diff second to *** time ago, with setting locale\n * @param diff\n * @param locale\n * @param defaultLocale\n * @returns {string | void | *}\n */\n\n\nvar formatDiff = exports.formatDiff = function formatDiff(diff, locale, defaultLocale) {\n  // if locale is not exist, use defaultLocale.\n  // if defaultLocale is not exist, use build-in `en`.\n  // be sure of no error when locale is not exist.\n  locale = _locales.Locales[locale] ? locale : _locales.Locales[defaultLocale] ? defaultLocale : 'en';\n  var i = 0,\n      agoin = diff < 0 ? 1 : 0,\n      // timein or timeago\n  total_sec = diff = Math.abs(diff);\n\n  for (; diff >= _constant.SEC_ARRAY[i] && i < _constant.SEC_ARRAY.length; i++) {\n    diff /= _constant.SEC_ARRAY[i];\n  }\n\n  diff = toInt(diff);\n  i *= 2;\n  if (diff > (i === 0 ? 9 : 1)) i += 1;\n  return _locales.Locales[locale](diff, i, total_sec)[agoin].replace('%s', diff);\n};\n/**\n * calculate the diff second between date to be formatted an now date.\n * @param date\n * @param nowDate\n * @returns {number}\n */\n\n\nvar diffSec = exports.diffSec = function diffSec(date, nowDate) {\n  nowDate = nowDate ? toDate(nowDate) : new Date();\n  return (nowDate - toDate(date)) / 1000;\n};\n/**\n * nextInterval: calculate the next interval time.\n * - diff: the diff sec between now and date to be formatted.\n *\n * What's the meaning?\n * diff = 61 then return 59\n * diff = 3601 (an hour + 1 second), then return 3599\n * make the interval with high performance.\n **/\n\n\nvar nextInterval = exports.nextInterval = function nextInterval(diff) {\n  var rst = 1,\n      i = 0,\n      d = Math.abs(diff);\n\n  for (; diff >= _constant.SEC_ARRAY[i] && i < _constant.SEC_ARRAY.length; i++) {\n    diff /= _constant.SEC_ARRAY[i];\n    rst *= _constant.SEC_ARRAY[i];\n  }\n\n  d = d % rst;\n  d = d ? rst - d : rst;\n  return Math.ceil(d);\n};\n/**\n * get the node attribute, native DOM and jquery supported.\n * @param node\n * @param name\n * @returns {*}\n */\n\n\nvar getAttr = exports.getAttr = function getAttr(node, name) {\n  if (node.getAttribute) return node.getAttribute(name); // native dom\n\n  if (node.attr) return node.attr(name); // jquery dom\n};\n/**\n * get the datetime attribute, `data-timeagp` / `datetime` are supported.\n * @param node\n * @returns {*}\n */\n\n\nvar getDateAttr = exports.getDateAttr = function getDateAttr(node) {\n  return getAttr(node, _constant.ATTR_TIMEAGO) || getAttr(node, _constant.ATTR_DATETIME);\n};\n/**\n * set the node attribute, native DOM and jquery supported.\n * @param node\n * @param val\n * @returns {*}\n */\n\n\nvar setTidAttr = exports.setTidAttr = function setTidAttr(node, val) {\n  if (node.setAttribute) return node.setAttribute(_constant.ATTR_DATA_TID, val);\n  if (node.attr) return node.attr(_constant.ATTR_DATA_TID, val);\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.register = exports.Locales = undefined;\n\nvar _constant = require('./constant');\n\nvar zh_CN = function zh_CN(number, index) {\n  if (index === 0) return ['刚刚', '片刻后'];\n\n  var unit = _constant.IndexMapZH[parseInt(index / 2)];\n\n  return [number + ' ' + unit + \"\\u524D\", number + ' ' + unit + \"\\u540E\"];\n};\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar en = function en(number, index) {\n  if (index === 0) return ['just now', 'right now'];\n\n  var unit = _constant.IndexMapEn[parseInt(index / 2)];\n\n  if (number > 1) unit += 's';\n  return [number + ' ' + unit + ' ago', 'in ' + number + ' ' + unit];\n};\n/**\n * 所有的语言\n * @type {{en: function(*, *), zh_CN: function(*, *)}}\n */\n\n\nvar Locales = exports.Locales = {\n  en: en,\n  zh_CN: zh_CN\n};\n/**\n * 注册语言\n * @param locale\n * @param func\n */\n\nvar register = exports.register = function register(locale, func) {\n  Locales[locale] = func;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.run = exports.cancel = exports.Timers = undefined;\n\nvar _helper = require('./helper');\n\nvar _constant = require('./constant'); // 所有的定时器\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar Timers = exports.Timers = [];\n\nvar clear = function clear(tid) {\n  if (tid) {\n    clearTimeout(tid);\n    delete Timers[tid];\n  }\n};\n/**\n * 取消定时器\n * @param node\n */\n\n\nvar cancel = exports.cancel = function cancel(node) {\n  if (node) clear((0, _helper.getAttr)(node, _constant.ATTR_DATA_TID)); // get the timer of DOM node(native / jq).\n  else for (var tid in Timers) {\n      clear(tid);\n    }\n};\n/**\n * 开启一个 timer\n * @param func\n * @param delay\n */\n\n\nvar run = exports.run = function run(func, delay) {\n  var tid = setTimeout(function () {\n    // 从 Timer 中删除\n    clear(tid); // 执行目标方法\n\n    func();\n  }, delay); // there is no need to save node in object. Just save the key\n\n  Timers[tid] = 0;\n  return tid;\n};","import React from \"react\";\nimport { Link, URL } from \"async-react-router\";\n\nexport default class Header extends React.Component {\n  render() {\n    return (\n      <header className=\"navbar navbar-default\">\n        <nav className=\"container\">\n          <div className=\"d-flex justify-content-between hidden-lg-up\">\n            <Link to={URL.name(\"IndexPage\")} className=\"navbar-brand\">\n              Flux Utils Example - Hacker News\n            </Link>\n          </div>\n        </nav>\n      </header>\n    );\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _TimeAgo = require('./TimeAgo');\n\nvar _locales = require('./locales');\n\nvar _timer = require('./timer'); // 入口函数\n\n\nvar factory = function factory(nowDate, locale) {\n  return new _TimeAgo.TimeAgo(nowDate, locale);\n};\n/**\n * 注册语言\n */\n\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nfactory.register = _locales.register;\n/**\n * 终止定时器\n */\n\nfactory.cancel = _timer.cancel;\nexports.default = factory;\nmodule.exports = exports['default'];","import Immutable from \"immutable\";\nimport { URL } from \"async-react-router\";\nimport timeago from \"timeago.js\";\n\nconst ItemRecord = Immutable.Record({\n  by: \"\",\n  descendants: 0,\n  id: null,\n  score: 0,\n  time: null,\n  title: \"\",\n  type: \"\",\n  url: \"\",\n  kids: null\n});\n\nexport default class Item extends ItemRecord {\n  getUrl() {\n    if (this.url) {\n      return this.url;\n    }\n\n    return URL.name(\"ItemPage\", { itemId: this.id });\n  }\n\n  getTimeAgo() {\n    return timeago().format(new Date(this.time * 1000));\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TimeAgo = undefined;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n/**\n * Created by hustcc on 18/5/20.\n * Contract: i@hust.cc\n */\n\n\nvar _helper = require('./helper');\n\nvar _timer = require('./timer');\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar TimeAgo = exports.TimeAgo = function () {\n  function TimeAgo(nowDate, defaultLocale) {\n    _classCallCheck(this, TimeAgo);\n\n    this.nowDate = nowDate;\n    this.defaultLocale = defaultLocale || 'en';\n  }\n\n  _createClass(TimeAgo, [{\n    key: 'setLocale',\n    value: function setLocale(locale) {\n      this.defaultLocale = locale;\n    }\n    /**\n     * render 定期器渲染\n     * @param node\n     * @param date\n     * @param locale\n     */\n\n  }, {\n    key: 'doRender',\n    value: function doRender(node, date, locale) {\n      var _this = this;\n\n      var diff = (0, _helper.diffSec)(date, this.nowDate); // render\n\n      node.innerHTML = (0, _helper.formatDiff)(diff, locale, this.defaultLocale); // waiting %s seconds, do the next render\n\n      var tid = (0, _timer.run)(function () {\n        _this.doRender(node, date, locale);\n      }, Math.min((0, _helper.nextInterval)(diff) * 1000, 0x7FFFFFFF)); // set attribute date-tid\n\n      (0, _helper.setTidAttr)(node, tid);\n    }\n    /**\n     * render: render the DOM real-time.\n     * - nodes: which nodes will be rendered.\n     * - locale: the locale name used to format date.\n     *\n     * How to use it?\n     * var timeago = require('timeago.js')();\n     * // 1. javascript selector\n     * timeago.render(document.querySelectorAll('.need_to_be_rendered'));\n     * // 2. use jQuery selector\n     * timeago.render($('.need_to_be_rendered'), 'pl');\n     *\n     * Notice: please be sure the dom has attribute `datetime`.\n     */\n\n  }, {\n    key: 'render',\n    value: function render(nodes, locale) {\n      // by .length\n      if (nodes.length === undefined) nodes = [nodes];\n      var node = void 0;\n\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        node = nodes[i]; // clear node's timer\n\n        (0, _timer.cancel)(node);\n        this.doRender(node, (0, _helper.getDateAttr)(node), locale); // render item\n      }\n    }\n    /**\n     * format: format the date to *** time ago, with setting or default locale\n     * - date: the date / string / timestamp to be formatted\n     * - locale: the formatted string's locale name, e.g. en / zh_CN\n     *\n     * How to use it?\n     * var timeago = require('timeago.js')();\n     * timeago.format(new Date(), 'pl'); // Date instance\n     * timeago.format('2016-09-10', 'fr'); // formated date string\n     * timeago.format(1473473400269); // timestamp with ms\n     */\n\n  }, {\n    key: 'format',\n    value: function format(date, locale) {\n      return (0, _helper.formatDiff)((0, _helper.diffSec)(date, this.nowDate), locale, this.defaultLocale);\n    }\n  }]);\n\n  return TimeAgo;\n}();","import React from \"react\";\nimport { URL, Link } from \"async-react-router\";\n\nexport default class CommentComponent extends React.Component {\n  render() {\n    const commentComponents = this.props.comment.comments\n      .filter((comment) => !!comment.by)\n      .map((comment) => (\n        <CommentComponent key={comment.id} comment={comment} />\n      ));\n    return (\n      <li>\n        <dl>\n          <dt>\n            <ul className=\"list-inline\">\n              <li className=\"by\">\n                <Link\n                  to={URL.name(\"UserPage\", { userId: this.props.comment.by })}\n                >\n                  {this.props.comment.by}\n                </Link>\n              </li>\n              <li className=\"time\">{this.props.comment.getTimeAgo()}</li>\n            </ul>\n          </dt>\n          <dd>\n            <p dangerouslySetInnerHTML={{ __html: this.props.comment.text }} />\n            <ul>{commentComponents}</ul>\n          </dd>\n        </dl>\n      </li>\n    );\n  }\n}\n","import React from \"react\";\nimport { from } from \"rxjs\";\nimport HackerNewsApi from \"../../api/HackerNewsApi\";\nimport CommentComponent from \"./CommentComponent\";\nimport { URL, Link } from \"async-react-router\";\n\nexport default class ItemComponent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true\n    };\n\n    this.commentApiStream = null;\n  }\n\n  componentDidMount() {\n    this.commentApiStream = from(\n      HackerNewsApi.getComments(this.props.item.kids)\n    ).subscribe((comments) => {\n      this.props.actions.commentsAction.sync(comments);\n      this.setState({ isLoading: false });\n    });\n  }\n\n  componentWillUnmount() {\n    this.commentApiStream.unsubscribe();\n  }\n\n  render() {\n    const loadingComponent = this.getLoadingComponent();\n    const commentComponents = this.getCommentComponents();\n    return (\n      <div className=\"container\">\n        <div className=\"news-item\">\n          <h3 className=\"title\">\n            <a href={this.props.item.getUrl()}>{this.props.item.title}</a>\n          </h3>\n          <div>\n            <ul className=\"list-inline\">\n              <li className=\"score\">{this.props.item.score} points</li>\n              <li className=\"by\">\n                by{\" \"}\n                <Link\n                  to={URL.name(\"UserPage\", { userId: this.props.item.by })}\n                  className=\"\"\n                >\n                  {this.props.item.by}\n                </Link>\n              </li>\n              <li className=\"time\">{this.props.item.getTimeAgo()}</li>\n            </ul>\n          </div>\n        </div>\n        <div>\n          <h4>Comment {loadingComponent}</h4>\n          <ul>{commentComponents}</ul>\n        </div>\n      </div>\n    );\n  }\n\n  getCommentComponents() {\n    if (this.state.isLoading) {\n      return <p>Loading...</p>;\n    }\n\n    if (this.props.comments.isEmpty()) {\n      return <p>No comments yet.</p>;\n    }\n\n    return this.props.comments\n      .filter((comment) => !!comment.by)\n      .map((comment) => (\n        <CommentComponent key={comment.id} comment={comment} />\n      ));\n  }\n\n  getLoadingComponent() {\n    if (this.state.isLoading) {\n      return (\n        <span>\n          <i className=\"fa fa-refresh fa-spin fa-fw\" />\n        </span>\n      );\n    }\n\n    return null;\n  }\n}\n","import React from \"react\";\nimport { Container } from \"flux/utils\";\nimport Header from \"../components/common/Header\";\nimport ItemComponent from \"../components/item/ItemComponent\";\n\nclass ItemContainer extends React.Component {\n  static getStores(props) {\n    return [props.stores.commentsStore, props.stores.itemStore];\n  }\n\n  static calculateState(prevState, props) {\n    return {\n      comments: props.stores.commentsStore.getState(),\n      item: props.stores.itemStore.getState()\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <Header />\n        <ItemComponent\n          actions={this.props.actions}\n          comments={this.state.comments}\n          item={this.state.item}\n        />\n      </div>\n    );\n  }\n}\n\nconst itemContainer = Container.create(ItemContainer, {\n  withProps: true\n});\nexport default itemContainer;\n","export const commentsType = {\n  SYNC: Symbol(\"comments/sync\")\n};\n","import { commentsType } from \"../../actionTypes/CommentsType\";\n\nclass CommentsAction {\n  constructor(dispatcher) {\n    this.dispatcher = dispatcher;\n  }\n\n  sync(comments) {\n    this.dispatcher.dispatch({\n      type: commentsType.SYNC,\n      comments: comments\n    });\n  }\n}\n\nexport function newCommentsAction(dispatcher) {\n  return new CommentsAction(dispatcher);\n}\n","export const itemType = {\n  NEW_INSTANCE: Symbol(\"item/newInstance\")\n};\n","import { itemType } from \"../../actionTypes/ItemType\";\n\nclass ItemAction {\n  constructor(dispatcher) {\n    this.dispatcher = dispatcher;\n  }\n\n  newInstance(attributes) {\n    this.dispatcher.dispatch({\n      type: itemType.NEW_INSTANCE,\n      attributes: attributes\n    });\n  }\n}\n\nexport function newItemAction(dispatcher) {\n  return new ItemAction(dispatcher);\n}\n","import { ReduceStore } from \"flux/utils\";\nimport { itemType } from \"../actionTypes/ItemType\";\nimport Item from \"../models/Item\";\n\nclass ItemStore extends ReduceStore {\n  getInitialState() {\n    return null;\n  }\n\n  reduce(state, action) {\n    switch (action.type) {\n      case itemType.NEW_INSTANCE:\n        return new Item(action.attributes);\n      case itemType.ADD_COMMENTS:\n        return Item;\n      default:\n        return state;\n    }\n  }\n}\n\nexport function newItemStore(dispatcher) {\n  return new ItemStore(dispatcher);\n}\n","import Immutable from \"immutable\";\nimport timeago from \"timeago.js\";\n\nconst CommentRecord = Immutable.Record({\n  by: \"\",\n  id: 0,\n  parent: 0,\n  text: \"\",\n  time: null,\n  type: \"\",\n  comments: []\n});\n\nexport default class Comment extends CommentRecord {\n  constructor(attributes) {\n    const newCommentList = Immutable.List();\n    attributes.comments = newCommentList.withMutations((newCommentList) => {\n      attributes.comments.map((commentAttributes) =>\n        newCommentList.push(new Comment(commentAttributes))\n      );\n    });\n    super(attributes);\n  }\n\n  getTimeAgo() {\n    return timeago().format(new Date(this.time * 1000));\n  }\n}\n","import Immutable from \"immutable\";\nimport { ReduceStore } from \"flux/utils\";\nimport Comment from \"../models/Comment\";\nimport { commentsType } from \"../actionTypes/CommentsType\";\n\nclass CommentsStore extends ReduceStore {\n  getInitialState() {\n    return Immutable.List();\n  }\n\n  reduce(state, action) {\n    switch (action.type) {\n      case commentsType.SYNC:\n        const newState = Immutable.List();\n        return newState.withMutations((newState) => {\n          action.comments.forEach((commentAttributes) =>\n            newState.push(new Comment(commentAttributes))\n          );\n        });\n      default:\n        return state;\n    }\n  }\n}\n\nexport function newCommentsStore(dispatcher) {\n  return new CommentsStore(dispatcher);\n}\n","import NProgress from \"nprogress\";\nimport React from \"react\";\nimport ItemContainer from \"../containers/ItemContainer\";\nimport HackerNewsApi from \"../api/HackerNewsApi\";\nimport NotFoundPage from \"./NotFoundPage\";\nimport { newItemDispatcher } from \"../dispatchers/ItemDispatcher\";\nimport { newCommentsAction } from \"../actions/item/CommentsAction\";\nimport { newItemAction } from \"../actions/item/ItemAction\";\nimport { newItemStore } from \"../stores/ItemStore\";\nimport { newCommentsStore } from \"../stores/CommentsStore\";\n\nexport default class ItemPage extends React.Component {\n  static initialPropsWillGet() {\n    NProgress.start();\n  }\n\n  static async getInitialProps(attributes) {\n    return {\n      item: await HackerNewsApi.findItem(attributes.params.itemId)\n    };\n  }\n\n  static initialPropsDidGet() {\n    NProgress.done();\n  }\n\n  render() {\n    if (!this.props.item) return <NotFoundPage />;\n\n    const itemDispatcher = newItemDispatcher();\n    const itemAction = newItemAction(itemDispatcher);\n    const itemStore = newItemStore(itemDispatcher);\n    const commentsAction = newCommentsAction(itemDispatcher);\n    const commentsStore = newCommentsStore(itemDispatcher);\n    itemAction.newInstance(this.props.item);\n\n    const params = {\n      stores: {\n        commentsStore,\n        itemStore\n      },\n      actions: {\n        commentsAction\n      }\n    };\n\n    return <ItemContainer {...params} />;\n  }\n}\n","import { Dispatcher } from \"flux\";\n\nexport function newItemDispatcher() {\n  return new Dispatcher();\n}\n"],"sourceRoot":""}