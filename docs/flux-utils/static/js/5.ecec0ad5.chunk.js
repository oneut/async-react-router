(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{107:function(e,t,n){"use strict";var r=n(105),a=n.n(r),c=n(106),s=n(73),u=n(74),i=n(117),o=n.n(i),p=(n(119),n(120)),h=n.n(p),l=new(function(){function e(){Object(s.a)(this,e),this.displayNumber=20,o.a.apps.length||o.a.initializeApp({databaseURL:"https://hacker-news.firebaseio.com"}),this.api=o.a.database().ref("/v0"),this.cache=h()({max:500,maxAge:36e5})}return Object(u.a)(e,[{key:"getTopStoryItems",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t,n,r,s,u=this,i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:1,e.next=3,this.getTopStoryItemIds();case 3:return n=e.sent,r=this.displayNumber*(t-1),s=r+this.displayNumber,e.next=8,Promise.all(n.slice(r,s).map(function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.findItem(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTopStoryItemIds",value:function(){var e=Object(c.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has("topstories")){e.next=2;break}return e.abrupt("return",this.cache.get("topstories"));case 2:return e.next=4,this.api.child("/topstories").once("value");case 4:return t=e.sent,n=t.val(),this.cache.set("topstories",n),e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"findItem",value:function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has("item/".concat(t))){e.next=2;break}return e.abrupt("return",this.cache.get("item/".concat(t)));case 2:return e.next=4,this.api.child("/item/".concat(t)).once("value");case 4:return n=e.sent,r=n.val(),this.cache.set("item/".concat(t),r),e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Promise.all(t.map(function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.findItem(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 4:return n=e.sent,e.next=7,Promise.all(n.map(function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getComments(t.kids);case 2:return t.comments=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"findUser",value:function(){var e=Object(c.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has("/user/".concat(t))){e.next=2;break}return e.abrupt("return",this.cache.get("/user/".concat(t)));case 2:return e.next=4,this.api.child("/user/".concat(t)).once("value");case 4:return n=e.sent,r=n.val(),this.cache.set("/user/".concat(t),r),e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}());t.a=l},112:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(73),a=n(74),c=n(76),s=n(75),u=n(77),i=n(34),o=n.n(i),p=n(78),h=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return o.a.createElement("header",{className:"navbar navbar-default"},o.a.createElement("nav",{className:"container"},o.a.createElement("div",{className:"d-flex justify-content-between hidden-lg-up"},o.a.createElement(p.Link,{to:p.URL.name("IndexPage"),className:"navbar-brand"},"Flux Utils Example - Hacker News"))))}}]),t}(o.a.Component)},99:function(e,t,n){"use strict";n.r(t);var r=n(105),a=n.n(r),c=n(106),s=n(73),u=n(74),i=n(76),o=n(75),p=n(77),h=n(72),l=n.n(h),f=n(34),b=n.n(f),m=n(103),v=n(112),d=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return b.a.createElement("div",{className:"container"},b.a.createElement("h3",null,"User: ",this.props.user.id),b.a.createElement("p",null,"created: ",this.props.user.created),b.a.createElement("p",null,"karma: ",this.props.user.karma))}}]),t}(b.a.Component),j=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return b.a.createElement("div",null,b.a.createElement(v.a,null),b.a.createElement(d,{user:this.state.user}))}}],[{key:"getStores",value:function(e){return[e.stores.userStore]}},{key:"calculateState",value:function(e,t){return{user:t.stores.userStore.getState()}}}]),t}(b.a.Component),O=m.Container.create(j,{withProps:!0}),y=n(107),k=n(79),w=n(121);var x={NEW_INSTANCE:Symbol("user/newInstance")},E=function(){function e(t){Object(s.a)(this,e),this.dispatcher=t}return Object(u.a)(e,[{key:"newInstance",value:function(e){this.dispatcher.dispatch({type:x.NEW_INSTANCE,attributes:e})}}]),e}();var g=n(108),I=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),t}(n.n(g).a.Record({id:"",karma:0,created:null})),N=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getInitialState",value:function(){return null}},{key:"reduce",value:function(e,t){switch(t.type){case x.NEW_INSTANCE:return new I(t.attributes);default:return e}}}]),t}(m.ReduceStore);n.d(t,"default",function(){return S});var S=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){if(!this.props.user)return b.a.createElement(k.a,null);var e=new w.Dispatcher,t=new E(e),n=function(e){return new N(e)}(e);t.newInstance(this.props.user);var r={stores:{userStore:n}};return b.a.createElement(O,Object.assign({},r,{params:this.props.params}))}}],[{key:"initialPropsWillGet",value:function(){l.a.start()}},{key:"getInitialProps",value:function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.findUser(t.params.userId);case 2:return e.t0=e.sent,e.abrupt("return",{user:e.t0});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"initialPropsDidGet",value:function(){l.a.done()}}]),t}(b.a.Component)}}]);
//# sourceMappingURL=5.ecec0ad5.chunk.js.map